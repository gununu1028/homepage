(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{205:function(e,t,s){"use strict";s.r(t);var a=s(0),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"this-validate-の-thisとは？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this-validate-の-thisとは？","aria-hidden":"true"}},[e._v("#")]),e._v(" $this->validate()の$thisとは？")]),e._v(" "),s("h2",{attrs:{id:"はじめに"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#はじめに","aria-hidden":"true"}},[e._v("#")]),e._v(" はじめに")]),e._v(" "),s("p",[e._v("以下のようなサンプルコードがある。")]),e._v(" "),s("div",{staticClass:"language-php:app/Http/Controllers/Admin/NewsController.php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("\n<?php\nnamespace App\\Http\\Controllers\\Admin;\nuse Illuminate\\Http\\Request;\nuse App\\Http\\Controllers\\Controller;\n\nuse App\\News;\n\nclass NewsController extends Controller\n{\n  // 入力された値をもとにデータベースへ保存する\n  public function create(Request $request)\n  {\n      // バリデーションを行う\n      $this->validate($request, News::$rules);\n\n      $news = new News;\n      $form = $request->all();\n\n      $news->fill($form);\n      $news->save();\n\n      return redirect('admin/news/create');\n  }\n}\n\n")])])]),s("p",[s("code",[e._v("$this->validate()")]),e._v(" とは、バリデーションを行う。\nデータを保存する前に、データを送信されてきた値が正しいかどうか確認が必要な場合がある。\n例えば、ニュース投稿でタイトルが入力されていなかったときに、何も検証しないままでは不完全なデータを登録してしまう。\nこのようなデータの不備を、あらかじめ防ぐために検証する仕組みがバリデーションである。")]),e._v(" "),s("p",[e._v("しかし、突然 "),s("code",[e._v("$this")]),e._v(" が現れている。今回はこれについて説明する。")]),e._v(" "),s("h2",{attrs:{id:"thisを見てみよう"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#thisを見てみよう","aria-hidden":"true"}},[e._v("#")]),e._v(" $thisを見てみよう")]),e._v(" "),s("p",[e._v("変数の中身を確認できる関数 "),s("code",[e._v("var_dump()")]),e._v(" を利用する。")]),e._v(" "),s("div",{staticClass:"language-php:app/Http/Controllers/Admin/NewsController.php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("class NewsController extends Controller\n{\n  // ニュース投稿画面を開く\n  public function add()\n  {\n      var_dump($this);\n  }\n}\n")])])]),s("p",[e._v("実行結果は以下の通りである。")]),e._v(" "),s("img",{attrs:{width:"700",alt:"全画面_2019_09_24_9_24.png",src:"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/227802/33cfa887-dbdd-281c-50a1-7c2f9d6aba13.png"}}),e._v(" "),s("p",[s("code",[e._v("$this")]),e._v(" にはNewsControllerのObjectが入っているようだ。\nつまり、NewsController自体を指しているという意味である。")]),e._v(" "),s("h2",{attrs:{id:"もう少し深掘りする"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#もう少し深掘りする","aria-hidden":"true"}},[e._v("#")]),e._v(" もう少し深掘りする")]),e._v(" "),s("p",[e._v("NewsController自体を指すとは、どういう意味か？\nプログラムで "),s("code",[e._v("class NewsController extends Controller")]),e._v(" と宣言しているがこれが鍵となっている。\nNewsControllerという名前でクラス定義している。")]),e._v(" "),s("p",[e._v("classを直訳すると、共通の性質を有している部類、種類という意味である。\nこれでは分かりづらいので、学校のクラスを想像してほしい。\n学校のクラスには様々な生徒がいる。国語が得意な子、音楽が得意な子など、生徒それぞれには特徴がある。\nまた、担任の先生も存在する。\nさらに教室の中には、黒板や机、椅子もある。\nそのように一つのクラスには様々な人やものが所属していると考えるが、これと同様と思って良い。\nちなみに生徒や先生、黒板などをメンバーという。")]),e._v(" "),s("img",{attrs:{width:"1113",alt:"6067dfb43921b34d9f6c53d59946a599.png",src:"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/227802/581fb475-b794-11bc-0ae3-4a3c9078e1f1.png"}}),e._v(" "),s("p",[e._v("上の図のように、NewsControllerにはindex()やadd()などのメソッドが含まれており、これらはNewsControllerのメンバーといえる。")]),e._v(" "),s("h2",{attrs:{id:"newscontrollerにはvalidate-がない？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#newscontrollerにはvalidate-がない？","aria-hidden":"true"}},[e._v("#")]),e._v(" NewsControllerにはvalidate()がない？")]),e._v(" "),s("p",[e._v("一つのクラスには様々な人やものが所属していると考えれば良い、と出たがNewsControllerにはvalidate()なんて存在しない。\nそれではどこにあるのか？")]),e._v(" "),s("p",[e._v("プログラムで "),s("code",[e._v("class NewsController extends Controller")]),e._v(" と宣言しているが、またこれが重要なポイントである。\nこれはControllerを継承してNewsControllerを宣言しており、Controllerのメンバーを利用して良いという意味である。")]),e._v(" "),s("div",{staticClass:"language-php:app/Http/Controllers/Controller.php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("<?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Foundation\\Bus\\DispatchesJobs;\nuse Illuminate\\Routing\\Controller as BaseController;\nuse Illuminate\\Foundation\\Validation\\ValidatesRequests;\nuse Illuminate\\Foundation\\Auth\\Access\\AuthorizesRequests;\n\nclass Controller extends BaseController\n{\n    use AuthorizesRequests, DispatchesJobs, ValidatesRequests;\n}\n")])])]),s("p",[e._v("Controllerにもvalidate()がない。")]),e._v(" "),s("p",[e._v("答えを先に言うと、\n"),s("code",[e._v("vendor/laravel/framework/src/Illuminate/Foundation/Validation/ValidatesRequests.php")]),e._v(" にvalidate()がある。")]),e._v(" "),s("p",[e._v("今回は "),s("code",[e._v("use AuthorizesRequests, DispatchesJobs, ValidatesRequests;")]),e._v(" がポイントで、これで他のプログラムを呼び出している。\nValidatesRequests.phpに存在するメソッドなどを利用できる。\nつまり、バリデーションはLaravelで用意されている機能である。")])])}),[],!1,null,null,null);t.default=n.exports}}]);